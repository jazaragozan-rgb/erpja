<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>JA · ERP {% block title %}{% endblock %}</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Share+Tech+Mono&family=DM+Sans:wght@300;400;500&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg:#0a0a0a;--surface:#111;--panel:#171717;--card:#1e1e1e;
      --border:#252525;--border2:#2e2e2e;
      --accent:#e86c2f;--accent2:#f0a500;
      --green:#2ecc71;--red:#e74c3c;--blue:#3498db;--yellow:#f39c12;
      --text:#e0e0e0;--muted:#555;--muted2:#777;
      --mono:'Share Tech Mono',monospace;--display:'Bebas Neue',sans-serif;--body:'DM Sans',sans-serif;
    }
    *,*::before,*::after{box-sizing:border-box;margin:0;padding:0;}
    html,body{height:100%;overflow:hidden;}
    body{background:var(--bg);color:var(--text);font-family:var(--body);font-weight:300;display:flex;}
    .sidebar{width:210px;min-width:210px;background:var(--surface);border-right:1px solid var(--border);display:flex;flex-direction:column;height:100vh;}
    .sb-logo{padding:1.1rem 1.2rem;border-bottom:1px solid var(--border);display:flex;align-items:center;gap:.7rem;}
    .sb-logo-name{font-family:var(--display);font-size:1rem;letter-spacing:.06em;color:#fff;line-height:1;}
    .sb-logo-sub{font-family:var(--mono);font-size:.48rem;letter-spacing:.18em;color:var(--accent);text-transform:uppercase;}
    .sb-nav{flex:1;padding:.6rem 0;overflow-y:auto;}
    .sb-group{font-family:var(--mono);font-size:.48rem;letter-spacing:.22em;color:var(--muted);text-transform:uppercase;padding:.7rem 1.2rem .2rem;}
    .sb-item{display:flex;align-items:center;gap:.6rem;padding:.5rem 1.2rem;cursor:pointer;border-left:2px solid transparent;font-size:.8rem;color:var(--muted2);text-decoration:none;transition:all .15s;}
    .sb-item:hover{color:var(--text);background:rgba(255,255,255,.03);}
    .sb-item.active{color:var(--accent);border-left-color:var(--accent);background:rgba(232,108,47,.06);}
    .sb-icon{font-size:.85rem;width:16px;text-align:center;}
    .sb-footer{padding:.9rem 1.2rem;border-top:1px solid var(--border);}
    .sb-user{display:flex;align-items:center;gap:.7rem;}
    .sb-avatar{width:26px;height:26px;background:var(--accent);display:flex;align-items:center;justify-content:center;font-family:var(--display);font-size:.75rem;color:#000;flex-shrink:0;}
    .sb-uname{font-size:.75rem;color:var(--text);}
    .sb-urole{font-family:var(--mono);font-size:.48rem;color:var(--muted);letter-spacing:.1em;text-transform:uppercase;}
    .online-dot{width:6px;height:6px;background:var(--green);border-radius:50%;margin-left:auto;animation:pulse 2s infinite;}
    @keyframes pulse{0%,100%{opacity:1}50%{opacity:.3}}
    .main{flex:1;display:flex;flex-direction:column;height:100vh;overflow:hidden;}
    .topbar{height:46px;min-height:46px;border-bottom:1px solid var(--border);display:flex;align-items:center;padding:0 1.4rem;gap:1rem;background:var(--surface);}
    .topbar-title{font-family:var(--display);font-size:1.05rem;letter-spacing:.05em;color:#fff;}
    .topbar-sub{font-family:var(--mono);font-size:.52rem;color:var(--muted);letter-spacing:.1em;text-transform:uppercase;}
    .topbar-right{margin-left:auto;display:flex;align-items:center;gap:.6rem;}
    .btn{font-family:var(--mono);font-size:.58rem;letter-spacing:.12em;text-transform:uppercase;padding:.38rem .85rem;border:1px solid var(--border2);background:transparent;color:var(--muted2);cursor:pointer;transition:all .15s;text-decoration:none;display:inline-block;}
    .btn:hover{border-color:var(--accent);color:var(--accent);}
    .btn-primary{background:var(--accent);border-color:var(--accent);color:#000;}
    .btn-primary:hover{background:var(--accent2);border-color:var(--accent2);color:#000;}
    .btn-danger{border-color:var(--red);color:var(--red);}
    .btn-danger:hover{background:var(--red);color:#fff;}
    .btn-sm{padding:.25rem .6rem;font-size:.52rem;}
    .content{flex:1;overflow-y:auto;padding:1.4rem;}
    .kpi-row{display:grid;grid-template-columns:repeat(4,1fr);gap:1px;background:var(--border);margin-bottom:1.4rem;}
    .kpi{background:var(--panel);padding:1.1rem 1.3rem;position:relative;overflow:hidden;}
    .kpi::before{content:'';position:absolute;top:0;left:0;right:0;height:2px;}
    .kpi.orange::before{background:var(--accent);}
    .kpi.green::before{background:var(--green);}
    .kpi.blue::before{background:var(--blue);}
    .kpi.yellow::before{background:var(--yellow);}
    .kpi.red::before{background:var(--red);}
    .kpi-label{font-family:var(--mono);font-size:.52rem;letter-spacing:.15em;color:var(--muted);text-transform:uppercase;margin-bottom:.4rem;}
    .kpi-value{font-family:var(--display);font-size:1.9rem;color:#fff;line-height:1;}
    .kpi-sub{font-family:var(--mono);font-size:.55rem;color:var(--muted2);margin-top:.3rem;}
    .panel{background:var(--panel);border:1px solid var(--border);margin-bottom:1.2rem;}
    .panel-header{padding:.7rem 1.1rem;border-bottom:1px solid var(--border);display:flex;align-items:center;justify-content:space-between;gap:1rem;}
    .panel-title{font-family:var(--mono);font-size:.58rem;letter-spacing:.18em;text-transform:uppercase;color:var(--muted2);}
    .panel-action{font-family:var(--mono);font-size:.55rem;letter-spacing:.1em;color:var(--accent);cursor:pointer;text-transform:uppercase;background:none;border:none;text-decoration:none;}
    .panel-body{padding:1rem 1.1rem;}
    .table{width:100%;border-collapse:collapse;}
    .table th{font-family:var(--mono);font-size:.5rem;letter-spacing:.14em;text-transform:uppercase;color:var(--muted);padding:.5rem .8rem;text-align:left;border-bottom:1px solid var(--border);}
    .table td{padding:.6rem .8rem;font-size:.8rem;color:var(--text);border-bottom:1px solid var(--border);}
    .table tr:last-child td{border-bottom:none;}
    .table tr:hover td{background:rgba(255,255,255,.02);}
    .table a{color:var(--text);text-decoration:none;}.table a:hover{color:var(--accent);}
    .badge{font-family:var(--mono);font-size:.48rem;letter-spacing:.1em;text-transform:uppercase;padding:.18rem .48rem;display:inline-block;}
    .badge-green{background:rgba(46,204,113,.15);color:var(--green);border:1px solid rgba(46,204,113,.3);}
    .badge-orange{background:rgba(232,108,47,.15);color:var(--accent);border:1px solid rgba(232,108,47,.3);}
    .badge-yellow{background:rgba(243,156,18,.15);color:var(--yellow);border:1px solid rgba(243,156,18,.3);}
    .badge-red{background:rgba(231,76,60,.15);color:var(--red);border:1px solid rgba(231,76,60,.3);}
    .badge-blue{background:rgba(52,152,219,.15);color:var(--blue);border:1px solid rgba(52,152,219,.3);}
    .badge-muted{background:rgba(255,255,255,.05);color:var(--muted2);border:1px solid var(--border);}
    .form-grid{display:grid;gap:.8rem;margin-bottom:.8rem;}
    .form-grid.cols-2{grid-template-columns:1fr 1fr;}
    .form-grid.cols-3{grid-template-columns:1fr 1fr 1fr;}
    .form-field{display:flex;flex-direction:column;gap:.3rem;}
    .form-label{font-family:var(--mono);font-size:.5rem;letter-spacing:.15em;text-transform:uppercase;color:var(--muted);}
    .form-input,.form-select,.form-textarea{background:var(--card);border:1px solid var(--border);color:var(--text);font-family:var(--body);font-size:.82rem;padding:.5rem .7rem;outline:none;transition:border-color .15s;width:100%;}
    .form-input:focus,.form-select:focus,.form-textarea:focus{border-color:var(--accent);}
    .form-select option{background:var(--card);}
    .form-textarea{resize:vertical;min-height:80px;}
    .timeline{position:relative;padding-left:1.1rem;}
    .timeline::before{content:'';position:absolute;left:0;top:0;bottom:0;width:1px;background:var(--border);}
    .tl-item{position:relative;padding:0 0 1rem 1rem;}
    .tl-dot{position:absolute;left:-1.28rem;top:.25rem;width:8px;height:8px;border-radius:50%;border:1px solid var(--bg);}
    .tl-dot.orange{background:var(--accent);}
    .tl-dot.green{background:var(--green);}
    .tl-dot.blue{background:var(--blue);}
    .tl-dot.muted{background:var(--border2);}
    .tl-date{font-family:var(--mono);font-size:.5rem;color:var(--muted);letter-spacing:.1em;margin-bottom:.15rem;}
    .tl-text{font-size:.8rem;color:var(--muted2);}
    .tl-text strong{color:var(--text);font-weight:400;}
    .grid-2{display:grid;grid-template-columns:1fr 1fr;gap:1.2rem;}
    .grid-60-40{display:grid;grid-template-columns:1.5fr 1fr;gap:1.2rem;}
    .search-bar{display:flex;align-items:center;background:var(--card);border:1px solid var(--border);padding:.38rem .8rem;gap:.5rem;}
    .search-bar input{background:transparent;border:none;outline:none;color:var(--text);font-family:var(--body);font-size:.82rem;flex:1;}
    .detail-header{background:var(--panel);border:1px solid var(--border);padding:1.4rem;margin-bottom:1.2rem;display:flex;align-items:flex-start;justify-content:space-between;gap:1rem;}
    .detail-name{font-family:var(--display);font-size:2rem;letter-spacing:.04em;color:#fff;line-height:1;}
    .detail-company{font-size:.9rem;color:var(--muted2);margin-top:.2rem;}
    .detail-meta{display:flex;gap:1.5rem;margin-top:.8rem;flex-wrap:wrap;}
    .detail-meta-item{font-family:var(--mono);font-size:.58rem;color:var(--muted);}
    .detail-meta-item span{color:var(--muted2);}
    .empty{text-align:center;padding:2rem;color:var(--muted);font-family:var(--mono);font-size:.6rem;letter-spacing:.15em;text-transform:uppercase;}
    ::-webkit-scrollbar{width:4px;}::-webkit-scrollbar-track{background:var(--bg);}::-webkit-scrollbar-thumb{background:var(--border2);}
    @media(max-width:900px){.kpi-row{grid-template-columns:1fr 1fr;}.grid-2,.grid-60-40{grid-template-columns:1fr;}.form-grid.cols-2,.form-grid.cols-3{grid-template-columns:1fr;}}
  </style>
</head>
<body>
<aside class="sidebar">
  <div class="sb-logo">
    <svg width="18" height="22" viewBox="0 0 18 22">
      <line x1="3" y1="2" x2="3" y2="20" stroke="#e86c2f" stroke-width="2.5"/>
      <line x1="3" y1="2" x2="9" y2="2" stroke="#e86c2f" stroke-width="2.5"/>
      <line x1="3" y1="20" x2="9" y2="20" stroke="#e86c2f" stroke-width="2.5"/>
      <circle cx="3" cy="11" r="2" fill="#e86c2f"/>
    </svg>
    <div><div class="sb-logo-name">JA · ERP</div><div class="sb-logo-sub">Sistema de gestión</div></div>
  </div>
  <nav class="sb-nav">
    <div class="sb-group">Principal</div>
    <a href="/dashboard" class="sb-item {{ 'active' if request.path=='/dashboard' or request.path=='/' else '' }}">
      <span class="sb-icon">◈</span> Dashboard
    </a>
    <div class="sb-group">Módulos</div>
    <a href="/clientes" class="sb-item {{ 'active' if 'cliente' in request.path else '' }}">
      <span class="sb-icon">◎</span> CRM / Clientes
    </a>
    <a href="/presupuestos" class="sb-item {{ 'active' if 'presupuesto' in request.path and 'cliente' not in request.path else '' }}">
      <span class="sb-icon">◈</span> Presupuestos
    </a>
    <a href="/proyectos" class="sb-item {{ 'active' if 'proyect' in request.path else '' }}">
      <span class="sb-icon">◧</span> Proyectos
    </a>
    <a href="/albaranes" class="sb-item {{ 'active' if 'albaran' in request.path else '' }}">
      <span class="sb-icon">◫</span> Albaranes
    </a>
    <a href="/facturacion" class="sb-item {{ 'active' if 'factur' in request.path else '' }}">
      <span class="sb-icon">▦</span> Facturación
    </a>
    <a href="/proveedores" class="sb-item {{ 'active' if 'proveedor' in request.path else '' }}">
      <span class="sb-icon">◪</span> Proveedores
    </a>
  </nav>
  <div class="sb-footer">
    <div class="sb-user">
      <div class="sb-avatar">JA</div>
      <div><div class="sb-uname">Juan Antonio</div><div class="sb-urole">Administrador</div></div>
      <div class="online-dot"></div>
    </div>
  </div>
</aside>
<div class="main">
  <div class="topbar">{% block topbar %}{% endblock %}</div>
  <div class="content">{% block content %}{% endblock %}</div>
</div>
</body>
</html>
